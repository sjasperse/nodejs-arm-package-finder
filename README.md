I wrote this to help me test a concern from https://github.com/creationix/nvm/pull/742
